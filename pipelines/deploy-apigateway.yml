parameters:
  apiGatewayName: string

steps:
  - task: FileTransform@1
    displayName: 'Transform variables: ${{parameters.apiGatewayName}}'
    inputs:
      folderPath: '$(Pipeline.Workspace)/ToDosDemoServices/drop/${{parameters.apiGatewayName}}.zip'
      fileType: json
      targetFiles: '**/*.json'

  - task: AzureWebApp@1
    displayName: 'Api Gateway Deploy: ${{parameters.apiGatewayName}}'
    inputs:
      azureSubscription: $(azureSubscriptionName)
      appName: 'kros-demo-apigateway-api'
      package: '$(Pipeline.Workspace)/ToDosDemoServices/drop/${{parameters.apiGatewayName}}.zip'