{
	"info": {
		"_postman_id": "397e74d7-c52d-446c-8dce-4c4b8d9f6676",
		"name": "ToDos",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create",
			"item": [
				{
					"name": "Seed",
					"item": [
						{
							"name": "New organization",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Seeding organization should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Seeding organization should return organization ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Create.OrganizationId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"organizationName\": \"{{$randomCompanyName}}\",\n\t\"businessId\": \"1234567890\",\n\t\"street\": \"{{$randomStreetName}}\",\n\t\"streetNumber\": \"{{$randomInt}}\",\n\t\"city\": \"{{$randomCity}}\",\n\t\"zipCode\": \"010 01\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization",
					"item": [
						{
							"name": "New ToDo without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo without token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Bad request",
					"item": [
						{
							"name": "With no data",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with no data should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with no data should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With no name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with no name should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with no name should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With empty name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with no name should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with no name should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With name too long",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with name too long should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with name too long should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"Lorem ipsum dolor sit amet, consectetur adipiscing vel\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With no description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with no description should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with no description should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"{{$randomProductName}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With empty description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with empty description should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with empty description should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"{{$randomProductName}}\",\n    \"description\": \"\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "With description too long",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo with description too long should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Creating ToDo with description too long should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Create.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce pellentesque quam vel gravida mollis. Donec dignissim varius leo et mattis. Nullam pulvinar euismod tellus, quis aliquam enim varius nec. Suspendisse venenatis, turpis in volutpat elementum turpis.\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Create.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "New ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"\r",
									"    pm.test(\"Creating ToDo should return valid JSON with ID.\", function () {\r",
									"        pm.response.to.be.json;\r",
									"\r",
									"        const jsonData = pm.response.json();\r",
									"        pm.expect(jsonData).to.have.property('id');\r",
									"\r",
									"        const id = jsonData.id;\r",
									"        pm.expect(id).to.be.above(0);\r",
									"\r",
									"        pm.environment.set('Temp.Create.ToDoId', id);\r",
									"        pm.globals.set('Temp.Create.Request', pm.request.body.raw);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Create.OrganizationId}}",
								"todos"
							]
						}
					},
					"response": []
				},
				{
					"name": "Verify ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Verifying created ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"\r",
									"    pm.test (\"Verifying created ToDo should return a ToDo with correct data.\", function () {\r",
									"        pm.response.to.be.json;\r",
									"\r",
									"        const req = JSON.parse(pm.globals.get('Temp.Create.Request'));\r",
									"        const res = pm.response.json();\r",
									"\r",
									"        pm.expect(res.id).to.eql(pm.environment.get(\"Temp.Create.ToDoId\"));\r",
									"        pm.expect(res.organizationId).to.eql(pm.environment.get(\"Temp.Create.OrganizationId\"));\r",
									"        pm.expect(res.isDone).to.be.false;\r",
									"\r",
									"        delete res.id;\r",
									"        delete res.userId;\r",
									"        delete res.created;\r",
									"        delete res.lastChange;\r",
									"        delete res.organizationId;\r",
									"        delete res.isDone;\r",
									"\r",
									"        pm.expect(res).to.eql(req);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}/todos/{{Temp.Create.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Create.OrganizationId}}",
								"todos",
								"{{Temp.Create.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Created organization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test (\"Deleting created ToDo should return status code 204.\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Create.OrganizationId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Create.OrganizationId}}"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const badRequestSchema = {",
							"    \"required\": [\"status\", \"errors\", \"title\"]",
							"};",
							"",
							"pm.environment.set(\"Temp.Create.BadRequestSchema\", badRequestSchema);"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Get",
			"item": [
				{
					"name": "Seed",
					"item": [
						{
							"name": "New organization",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Seeding organization should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Seeding organization should return organization ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Get.OrganizationId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"organizationName\": \"{{$randomCompanyName}}\",\n\t\"businessId\": \"1234567890\",\n\t\"street\": \"{{$randomStreetName}}\",\n\t\"streetNumber\": \"{{$randomInt}}\",\n\t\"city\": \"{{$randomCity}}\",\n\t\"zipCode\": \"010 01\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations"
									]
								}
							},
							"response": []
						},
						{
							"name": "New ToDo 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Creating ToDo should return ToDo ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Get.ToDoId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Get.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "New ToDo 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Creating ToDo should return ToDo ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Get.ToDoId2', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Get.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization",
					"item": [
						{
							"name": "Seeded ToDo with foreign token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Retrieving ToDo with foreign token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{Temp.ForeignAccessToken}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos/{{Temp.Get.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Get.OrganizationId}}",
										"todos",
										"{{Temp.Get.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Seeded ToDo without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Retrieving ToDo without token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos/{{Temp.Get.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Get.OrganizationId}}",
										"todos",
										"{{Temp.Get.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "All",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Retrieving list of ToDos should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"\r",
									"    const toDos = pm.response.json();\r",
									"\r",
									"    pm.test(\"Retrieving list of ToDos should return an array but not an object.\", function () {\r",
									"        pm.expect(toDos).to.be.an('array').but.not.an('object');\r",
									"\r",
									"        pm.test(\"Retrieving list of ToDos should have correct number of items.\", function () {\r",
									"            pm.expect(toDos.length).to.eql(2);\r",
									"        });\r",
									"\r",
									"        pm.test(\"Retrieving list of ToDos should return correct data format in each item.\", function () {\r",
									"            toDos.forEach(function(toDo) {\r",
									"                pm.expect(tv4.validate(toDo, pm.environment.get(\"Temp.Get.ToDoHeaderSchema\"))).to.be.true;\r",
									"            });\r",
									"        });\r",
									"\r",
									"        pm.test(\"Retrieving list of ToDos should return seeded items.\", function () {\r",
									"            var found1 = false;\r",
									"            var found2 = false;\r",
									"            \r",
									"            toDos.forEach(function(toDo) {\r",
									"                if (toDo.id == pm.environment.get(\"Temp.Get.ToDoId\")) {\r",
									"                    found1 = true;\r",
									"                } else if (toDo.id == pm.environment.get(\"Temp.Get.ToDoId2\")) {\r",
									"                    found2 = true;\r",
									"                }\r",
									"            });\r",
									"            \r",
									"            pm.expect(found1 && found2).to.be.true;\r",
									"        });\r",
									"    });    \r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Get.OrganizationId}}",
								"todos"
							]
						}
					},
					"response": []
				},
				{
					"name": "Non existing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Retrieving non existing ToDo should return status code 404.\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos/-1",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Get.OrganizationId}}",
								"todos",
								"-1"
							]
						}
					},
					"response": []
				},
				{
					"name": "By id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Retrieving a single ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"\r",
									"    const toDo = pm.response.json();\r",
									"\r",
									"    pm.test(\"Retrieving a single ToDo should return an object.\", function () {\r",
									"        pm.expect(toDo).to.be.an('object');\r",
									"\r",
									"        pm.test(\"Retrieving a single ToDo should return correct data format.\", function () {\r",
									"            pm.expect(tv4.validate(toDo, pm.environment.get(\"Temp.Get.ToDoFullSchema\"))).to.be.true;\r",
									"        });\r",
									"    });    \r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}/todos/{{Temp.Get.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Get.OrganizationId}}",
								"todos",
								"{{Temp.Get.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Seeded organization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test (\"Deleting seeded organization should return status code 204.\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Get.OrganizationId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Get.OrganizationId}}"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const toDoHeaderSchema = {",
							"    \"required\": [\"id\", \"name\", \"isDone\"],",
							"    \"properties\": {",
							"        \"id\": {\"type\": \"integer\"},",
							"        \"name\": {\"type\": \"string\"},",
							"        \"isDone\": {\"type\": \"boolean\"}",
							"    }",
							"};",
							"",
							"const toDoFullSchema = {",
							"    \"required\": [\"id\", \"userId\", \"organizationId\", \"name\", \"description\",",
							"                 \"created\", \"lastChange\", \"isDone\"],",
							"    \"properties\": {",
							"        \"id\": {\"type\": \"integer\"},",
							"        \"userId\": {\"type\": \"integer\"},",
							"        \"organizationId\": {\"type\": \"integer\"},",
							"        \"name\": {\"type\": \"string\"},",
							"        \"description\": {\"type\": \"string\"},",
							"        \"created\": {\"type\": \"string\", \"format\": \"date-time\"},",
							"        \"lastChange\": {\"type\": \"string\", \"format\": \"date-time\"},",
							"        \"isDone\": {\"type\": \"boolean\"}",
							"    }",
							"};",
							"",
							"pm.environment.set(\"Temp.Get.ToDoHeaderSchema\", toDoHeaderSchema);",
							"pm.environment.set(\"Temp.Get.ToDoFullSchema\", toDoFullSchema);"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Update",
			"item": [
				{
					"name": "Seed",
					"item": [
						{
							"name": "New organization",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Seeding organization should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Seeding organization should return organization ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Update.OrganizationId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"organizationName\": \"{{$randomCompanyName}}\",\n\t\"businessId\": \"1234567890\",\n\t\"street\": \"{{$randomStreetName}}\",\n\t\"streetNumber\": \"{{$randomInt}}\",\n\t\"city\": \"{{$randomCity}}\",\n\t\"zipCode\": \"010 01\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations"
									]
								}
							},
							"response": []
						},
						{
							"name": "New ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Creating ToDo should return ToDo ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Update.ToDoId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization",
					"item": [
						{
							"name": "Update ToDo without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo without token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Bad request",
					"item": [
						{
							"name": "With no data",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with no data should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with no data should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With no name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with no name should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with no name should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With empty name",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with no name should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with no name should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With name too long",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with name too long should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with name too long should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"Lorem ipsum dolor sit amet, consectetur adipiscing vel\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With no description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with no description should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with no description should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"{{$randomProductName}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With empty description",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with empty description should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with empty description should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"{{$randomProductName}}\",\n    \"description\": \"\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "With description too long",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Updating ToDo with description too long should return status code 400.\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"\r",
											"    pm.test(\"Updating ToDo with description too long should return correct error format.\", function () {\r",
											"        var response = pm.response.json();\r",
											"        pm.expect(tv4.validate(response, pm.environment.get(\"Temp.Update.BadRequestSchema\"))).to.be.true;\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce pellentesque quam vel gravida mollis. Donec dignissim varius leo et mattis. Nullam pulvinar euismod tellus, quis aliquam enim varius nec. Suspendisse venenatis, turpis in volutpat elementum turpis.\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Update.OrganizationId}}",
										"todos",
										"{{Temp.Update.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Update ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Updating ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    \r",
									"    pm.globals.set('Temp.Update.Request', pm.request.body.raw);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"{{Temp.Update.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Verify ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Verifying updated ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"\r",
									"    pm.test (\"Verifying updated ToDo should return a ToDo with correct data.\", function () {\r",
									"        pm.response.to.be.json;\r",
									"\r",
									"        const req = JSON.parse(pm.globals.get('Temp.Update.Request'));\r",
									"        const res = pm.response.json();\r",
									"\r",
									"        pm.expect(res.id).to.eql(pm.environment.get(\"Temp.Update.ToDoId\"));\r",
									"        pm.expect(res.organizationId).to.eql(pm.environment.get(\"Temp.Update.OrganizationId\"));\r",
									"        pm.expect(res.isDone).to.be.false;\r",
									"\r",
									"        delete res.id;\r",
									"        delete res.userId;\r",
									"        delete res.created;\r",
									"        delete res.lastChange;\r",
									"        delete res.organizationId;\r",
									"        delete res.isDone;\r",
									"\r",
									"        pm.expect(res).to.eql(req);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"{{Temp.Update.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Complete ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Completing ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"isDone\": true\n}"
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/changeIsDoneState/{{Temp.Update.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"changeIsDoneState",
								"{{Temp.Update.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Verify completed ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Verifying completed ToDo should return status code 200.\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"\r",
									"    pm.test (\"Verifying completed ToDo should return a ToDo with correct data.\", function () {\r",
									"        pm.response.to.be.json;\r",
									"\r",
									"        const req = JSON.parse(pm.globals.get('Temp.Update.Request'));\r",
									"        const res = pm.response.json();\r",
									"\r",
									"        pm.expect(res.id).to.eql(pm.environment.get(\"Temp.Update.ToDoId\"));\r",
									"        pm.expect(res.organizationId).to.eql(pm.environment.get(\"Temp.Update.OrganizationId\"));\r",
									"        pm.expect(res.isDone).to.be.true;\r",
									"\r",
									"        delete res.id;\r",
									"        delete res.userId;\r",
									"        delete res.created;\r",
									"        delete res.lastChange;\r",
									"        delete res.organizationId;\r",
									"        delete res.isDone;\r",
									"\r",
									"        pm.expect(res).to.eql(req);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/{{Temp.Update.ToDoId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"{{Temp.Update.ToDoId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update non-existing ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Updating non-existing ToDo should return status code 404.\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/0",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"0"
							]
						}
					},
					"response": []
				},
				{
					"name": "Complete non-existing ToDo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Completing non-existing ToDo should return status code 404.\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"isDone\": true\n}"
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}/todos/changeIsDoneState/0",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}",
								"todos",
								"changeIsDoneState",
								"0"
							]
						}
					},
					"response": []
				},
				{
					"name": "Created organization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test (\"Deleting seeded organization should return status code 204.\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Update.OrganizationId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Update.OrganizationId}}"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const badRequestSchema = {",
							"    \"required\": [\"status\", \"errors\", \"title\"]",
							"};",
							"",
							"pm.environment.set(\"Temp.Update.BadRequestSchema\", badRequestSchema);"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Delete",
			"item": [
				{
					"name": "Seed",
					"item": [
						{
							"name": "New organization",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Seeding organization should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Seeding organization should return organization ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Delete.OrganizationId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"organizationName\": \"{{$randomCompanyName}}\",\n\t\"businessId\": \"1234567890\",\n\t\"street\": \"{{$randomStreetName}}\",\n\t\"streetNumber\": \"{{$randomInt}}\",\n\t\"city\": \"{{$randomCity}}\",\n\t\"zipCode\": \"010 01\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations"
									]
								}
							},
							"response": []
						},
						{
							"name": "New ToDo 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Creating ToDo should return ToDo ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Delete.ToDoId', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "New ToDo 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Creating ToDo should return status code 201.\", function () {\r",
											"    pm.response.to.have.status(201);\r",
											"\r",
											"    pm.test(\"Creating ToDo should return ToDo ID.\", function () {\r",
											"        pm.response.to.be.json;\r",
											"\r",
											"        const jsonData = pm.response.json();\r",
											"        pm.expect(jsonData).to.have.property('id');\r",
											"\r",
											"        pm.environment.set('Temp.Delete.ToDoId2', jsonData.id);\r",
											"    });\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"name\": \"{{$randomProductName}}\",\n\t\"description\": \"{{$randomLoremSentence}}\"\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos"
									]
								}
							},
							"response": []
						},
						{
							"name": "Complete ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Setting completed ToDo should return status code 200.\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"isDone\": true\r\n}"
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/changeIsDoneState/{{Temp.Delete.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"changeIsDoneState",
										"{{Temp.Delete.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Authorization",
					"item": [
						{
							"name": "ToDo with foreign token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Deleting ToDo with foreign token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{Temp.ForeignAccessToken}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/{{Temp.Delete.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"{{Temp.Delete.ToDoId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "ToDo without token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Deleting ToDo without token should return status code 401.\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/{{Temp.Delete.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"{{Temp.Delete.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Completed",
					"item": [
						{
							"name": "Delete ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test (\"Deleting completed ToDos should return status code 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/deleteCompleted",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"deleteCompleted"
									]
								}
							},
							"response": []
						},
						{
							"name": "Verify ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test (\"Verifying deleted ToDo should return status code 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/{{Temp.Delete.ToDoId}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"{{Temp.Delete.ToDoId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "ById",
					"item": [
						{
							"name": "Delete ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test (\"Deleting ToDo by ID should return status code 204.\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/{{Temp.Delete.ToDoId2}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"{{Temp.Delete.ToDoId2}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Verify ToDo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test (\"Verifying deleted ToDo should return status code 404.\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/{{Temp.Delete.ToDoId2}}",
									"host": [
										"{{ApiBaseGatewayUri}}"
									],
									"path": [
										"organizations",
										"{{Temp.Delete.OrganizationId}}",
										"todos",
										"{{Temp.Delete.ToDoId2}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Non existing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test (\"Deleting non existing ToDo should return status code 404.\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}/todos/0",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Delete.OrganizationId}}",
								"todos",
								"0"
							]
						}
					},
					"response": []
				},
				{
					"name": "Seeded organization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test (\"Deleting seeded organization should return status code 204.\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{ApiBaseGatewayUri}}/organizations/{{Temp.Delete.OrganizationId}}",
							"host": [
								"{{ApiBaseGatewayUri}}"
							],
							"path": [
								"organizations",
								"{{Temp.Delete.OrganizationId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Cleanup",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"function cleanup() {\r",
							"    const clean = _.keys(pm.environment.toObject())\r",
							"    _.each(clean, (arrItem) => {\r",
							"        if (arrItem.startsWith(\"Temp.\")) {\r",
							"            pm.environment.unset(arrItem)\r",
							"        }\r",
							"    })\r",
							"}\r",
							"\r",
							"cleanup();"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Cleanup should return status code 404\", function () {",
							"    pm.response.to.have.status(404);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "CLEANUP",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{ApiBaseGatewayUri}}/cleanup",
					"host": [
						"{{ApiBaseGatewayUri}}"
					],
					"path": [
						"cleanup"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{Temp.AccessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"if (!pm.environment.get(\"Temp.AccessToken\") ||",
					"    pm.environment.get(\"Temp.AccessToken.Timeout\") < Date.now())",
					"{",
					"    pm.sendRequest(",
					"        {",
					"            url: pm.environment.get(\"OAuthUrl\"),",
					"            method: 'POST',",
					"            header: {",
					"                'Content-Type': 'application/x-www-form-urlencoded',",
					"            },",
					"            body: {",
					"                mode: 'urlencoded',",
					"                urlencoded: [",
					"                    {key: \"client_id\", value: \"Demo.BestPractices.Postman\", disabled: false},",
					"                    {key: \"grant_type\", value: \"password\", disabled: false},",
					"                    {key: \"username\", value: pm.environment.get(\"OAuthUsername\"), disabled: false},",
					"                    {key: \"password\", value: pm.environment.get(\"OAuthPassword\"), disabled: false}",
					"                ]",
					"            }",
					"        },",
					"        function (err, res) {",
					"            pm.environment.set(\"Temp.AccessToken\", res.json().access_token);",
					"            var now = new Date();",
					"            var timeout = now.setMinutes(now.getMinutes() + 20);",
					"            pm.environment.set(\"Temp.AccessToken.Timeout\", timeout);",
					"        }",
					"    );",
					"}",
					"",
					"if (!pm.environment.get(\"Temp.ForeignAccessToken\") ||",
					"    pm.environment.get(\"Temp.ForeignAccessToken.Timeout\") < Date.now())",
					"{",
					"    pm.sendRequest(",
					"        {",
					"            url: pm.environment.get(\"OAuthUrl\"),",
					"            method: 'POST',",
					"            header: {",
					"                'Content-Type': 'application/x-www-form-urlencoded',",
					"            },",
					"            body: {",
					"                mode: 'urlencoded',",
					"                urlencoded: [",
					"                    {key: \"client_id\", value: \"Demo.BestPractices.Postman\", disabled: false},",
					"                    {key: \"grant_type\", value: \"password\", disabled: false},",
					"                    {key: \"username\", value: pm.environment.get(\"OAuthForeignUsername\"), disabled: false},",
					"                    {key: \"password\", value: pm.environment.get(\"OAuthForeignPassword\"), disabled: false}",
					"                ]",
					"            }",
					"        },",
					"        function (err, res) {",
					"            pm.environment.set(\"Temp.ForeignAccessToken\", res.json().access_token);",
					"            var now = new Date();",
					"            var timeout = now.setMinutes(now.getMinutes() + 20);",
					"            pm.environment.set(\"Temp.ForeignAccessToken.Timeout\", timeout);",
					"        }",
					"    );",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}